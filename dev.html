<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BAM 2026</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
    tailwind.config = {
        theme: {
            extend: {
                colors: {
                    gold: { 50: '#FFFBEB', 100: '#FFF8DC', 200: '#FFE999', 300: '#FFD700', 400: '#DAA520', 500: '#B8860B', 600: '#996515' },
                    dark: { 50: '#1a1a1a', 100: '#141414', 200: '#0f0f0f', 300: '#0a0a0a', 400: '#050505' }
                },
                fontFamily: {
                    display: ['Playfair Display', 'Georgia', 'serif'],
                    body: ['Inter', 'system-ui', 'sans-serif']
                }
            }
        }
    }
    </script>
    <!-- GSAP + ScrollTrigger -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.14.1/gsap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.14.1/ScrollTrigger.min.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Playfair+Display:ital,wght@0,400;0,600;0,700;0,800;0,900;1,400;1,700&display=swap" rel="stylesheet">
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        html { scroll-behavior: smooth; }
        body { font-family: 'Inter', system-ui, sans-serif; background: #0a0a0a; color: #fff; overflow-x: hidden; }

        /* Custom Scrollbar */
        ::-webkit-scrollbar { width: 8px; }
        ::-webkit-scrollbar-track { background: #0a0a0a; }
        ::-webkit-scrollbar-thumb { background: linear-gradient(180deg, #FFD700, #DAA520); border-radius: 4px; }
        ::-webkit-scrollbar-thumb:hover { background: #FFD700; }

        /* Gold Text Gradient */
        .text-gold-gradient {
            background: linear-gradient(135deg, #FFD700, #FFF8DC, #DAA520, #FFD700);
            background-size: 300% 300%;
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            animation: shimmer 4s ease-in-out infinite;
        }

        @keyframes shimmer {
            0%, 100% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
        }

        /* Particle System */
        .particle {
            position: fixed;
            pointer-events: none;
            z-index: 100;
            border-radius: 50%;
        }

        .particle-gold {
            background: radial-gradient(circle, #FFD700, transparent);
            box-shadow: 0 0 6px #FFD700, 0 0 12px rgba(255, 215, 0, 0.3);
        }

        .particle-star {
            background: #FFF8DC;
            box-shadow: 0 0 4px #FFD700;
            clip-path: polygon(50% 0%, 61% 35%, 98% 35%, 68% 57%, 79% 91%, 50% 70%, 21% 91%, 32% 57%, 2% 35%, 39% 35%);
        }

        @keyframes fall {
            0% { transform: translateY(-10vh) rotate(0deg); opacity: 0; }
            10% { opacity: 1; }
            90% { opacity: 0.6; }
            100% { transform: translateY(105vh) rotate(720deg); opacity: 0; }
        }

        @keyframes float {
            0%, 100% { transform: translateY(0) translateX(0) rotate(0deg); }
            25% { transform: translateY(-20px) translateX(10px) rotate(5deg); }
            50% { transform: translateY(-10px) translateX(-5px) rotate(-3deg); }
            75% { transform: translateY(-25px) translateX(8px) rotate(4deg); }
        }

        /* Lock Screen Animations */
        .lock-input {
            background: rgba(255, 215, 0, 0.05);
            border: 2px solid rgba(255, 215, 0, 0.3);
            color: #FFD700;
            font-family: 'Inter', sans-serif;
            font-size: 1.2rem;
            letter-spacing: 0.3em;
            text-align: center;
            padding: 16px 24px;
            border-radius: 12px;
            outline: none;
            transition: all 0.3s ease;
            width: 100%;
            max-width: 320px;
        }
        .lock-input:focus {
            border-color: #FFD700;
            box-shadow: 0 0 20px rgba(255, 215, 0, 0.2), inset 0 0 20px rgba(255, 215, 0, 0.05);
        }
        .lock-input::placeholder {
            color: rgba(255, 215, 0, 0.3);
            letter-spacing: 0.2em;
        }

        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            10%, 30%, 50%, 70%, 90% { transform: translateX(-8px); }
            20%, 40%, 60%, 80% { transform: translateX(8px); }
        }
        .shake { animation: shake 0.6s ease-in-out; }

        @keyframes fadeInUp {
            from { opacity: 0; transform: translateY(40px); }
            to { opacity: 1; transform: translateY(0); }
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        @keyframes slideDown {
            from { opacity: 0; transform: translateY(-20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        @keyframes pulse-gold {
            0%, 100% { box-shadow: 0 0 0 0 rgba(255, 215, 0, 0.4); }
            50% { box-shadow: 0 0 0 15px rgba(255, 215, 0, 0); }
        }

        @keyframes spotlight {
            0% { background-position: -200% center; }
            100% { background-position: 200% center; }
        }

        /* Scroll Reveal */
        .reveal {
            opacity: 0;
            transform: translateY(30px);
            transition: all 0.8s cubic-bezier(0.16, 1, 0.3, 1);
        }
        .reveal.active {
            opacity: 1;
            transform: translateY(0);
        }
        .reveal-left {
            opacity: 0;
            transform: translateX(-50px);
            transition: all 0.8s cubic-bezier(0.16, 1, 0.3, 1);
        }
        .reveal-left.active {
            opacity: 1;
            transform: translateX(0);
        }
        .reveal-right {
            opacity: 0;
            transform: translateX(50px);
            transition: all 0.8s cubic-bezier(0.16, 1, 0.3, 1);
        }
        .reveal-right.active {
            opacity: 1;
            transform: translateX(0);
        }
        .reveal-scale {
            opacity: 0;
            transform: scale(0.9);
            transition: all 0.8s cubic-bezier(0.16, 1, 0.3, 1);
        }
        .reveal-scale.active {
            opacity: 1;
            transform: scale(1);
        }

        /* Hero Section */
        .hero-bg {
            background: radial-gradient(ellipse at center bottom, rgba(255, 215, 0, 0.08) 0%, transparent 60%),
                        radial-gradient(ellipse at 20% 50%, rgba(218, 165, 32, 0.05) 0%, transparent 50%),
                        radial-gradient(ellipse at 80% 50%, rgba(218, 165, 32, 0.05) 0%, transparent 50%);
        }

        /* MJ Hat Icon */
        .mj-hat {
            display: inline-block;
            width: 60px;
            height: 30px;
            background: #FFD700;
            border-radius: 50% 50% 0 0;
            position: relative;
            margin: 0 auto;
        }
        .mj-hat::after {
            content: '';
            position: absolute;
            bottom: -6px;
            left: -15px;
            right: -15px;
            height: 8px;
            background: #FFD700;
            border-radius: 50%;
        }

        /* Video Card */
        .video-card {
            position: relative;
            border-radius: 16px;
            overflow: hidden;
            border: 1px solid rgba(255, 215, 0, 0.15);
            background: rgba(255, 215, 0, 0.03);
            transition: all 0.4s cubic-bezier(0.16, 1, 0.3, 1);
        }
        .video-card:hover {
            border-color: rgba(255, 215, 0, 0.4);
            transform: translateY(-4px);
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.4), 0 0 30px rgba(255, 215, 0, 0.1);
        }
        .video-card iframe {
            width: 100%;
            aspect-ratio: 16/9;
            display: block;
        }

        /* Comment Styles */
        .comment-input {
            background: rgba(255, 255, 255, 0.03);
            border: 1px solid rgba(255, 215, 0, 0.2);
            color: #fff;
            padding: 14px 18px;
            border-radius: 12px;
            font-family: 'Inter', sans-serif;
            font-size: 0.95rem;
            outline: none;
            transition: all 0.3s ease;
            width: 100%;
        }
        .comment-input:focus {
            border-color: #FFD700;
            box-shadow: 0 0 0 3px rgba(255, 215, 0, 0.1);
        }
        .comment-input::placeholder { color: rgba(255, 255, 255, 0.3); }

        .comment-bubble {
            background: linear-gradient(135deg, rgba(255, 215, 0, 0.05), rgba(255, 215, 0, 0.02));
            border: 1px solid rgba(255, 215, 0, 0.1);
            border-radius: 16px;
            padding: 20px;
            transition: all 0.3s ease;
        }
        .comment-bubble:hover {
            border-color: rgba(255, 215, 0, 0.25);
            background: linear-gradient(135deg, rgba(255, 215, 0, 0.08), rgba(255, 215, 0, 0.03));
        }

        /* Gold Button */
        .btn-gold {
            background: linear-gradient(135deg, #FFD700, #DAA520);
            color: #0a0a0a;
            font-weight: 600;
            padding: 14px 32px;
            border-radius: 12px;
            border: none;
            cursor: pointer;
            font-family: 'Inter', sans-serif;
            font-size: 1rem;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }
        .btn-gold:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(255, 215, 0, 0.3);
        }
        .btn-gold:active { transform: translateY(0); }
        .btn-gold::after {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: linear-gradient(transparent, rgba(255, 255, 255, 0.2), transparent);
            transform: rotate(45deg);
            animation: spotlight 3s ease-in-out infinite;
        }

        /* Divider */
        .gold-divider {
            height: 1px;
            background: linear-gradient(90deg, transparent, rgba(255, 215, 0, 0.3), transparent);
            margin: 0 auto;
            width: 60%;
        }

        /* Nav Active */
        .nav-link {
            position: relative;
            color: rgba(255, 255, 255, 0.6);
            transition: color 0.3s ease;
            text-decoration: none;
            font-size: 0.9rem;
            font-weight: 500;
            letter-spacing: 0.05em;
            text-transform: uppercase;
        }
        .nav-link:hover, .nav-link.active {
            color: #FFD700;
        }
        .nav-link::after {
            content: '';
            position: absolute;
            bottom: -4px;
            left: 0;
            width: 0;
            height: 2px;
            background: #FFD700;
            transition: width 0.3s ease;
        }
        .nav-link:hover::after, .nav-link.active::after {
            width: 100%;
        }

        /* Floating decorative elements */
        .float-element {
            position: absolute;
            opacity: 0.1;
            animation: float 6s ease-in-out infinite;
        }

        /* Section Background Glow */
        .section-glow::before {
            content: '';
            position: absolute;
            top: 0;
            left: 50%;
            transform: translateX(-50%);
            width: 400px;
            height: 400px;
            background: radial-gradient(circle, rgba(255, 215, 0, 0.06), transparent 70%);
            pointer-events: none;
        }

        /* Loading spinner */
        .spinner {
            width: 24px;
            height: 24px;
            border: 3px solid rgba(255, 215, 0, 0.2);
            border-top-color: #FFD700;
            border-radius: 50%;
            animation: spin 0.8s linear infinite;
        }
        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        /* Glitter cursor trail */
        .cursor-sparkle {
            position: fixed;
            pointer-events: none;
            width: 4px;
            height: 4px;
            background: #FFD700;
            border-radius: 50%;
            z-index: 9999;
            animation: sparkle-fade 0.6s ease-out forwards;
        }
        @keyframes sparkle-fade {
            0% { opacity: 1; transform: scale(1); }
            100% { opacity: 0; transform: scale(0); }
        }

        /* Music note float animation */
        .music-note {
            position: absolute;
            font-size: 1.5rem;
            opacity: 0;
            animation: noteFloat 3s ease-in-out infinite;
        }
        @keyframes noteFloat {
            0% { opacity: 0; transform: translateY(0) rotate(0deg); }
            20% { opacity: 0.6; }
            80% { opacity: 0.3; }
            100% { opacity: 0; transform: translateY(-80px) rotate(15deg); }
        }

        /* ===== PREMIUM EFFECTS ===== */

        /* Film Grain Overlay */
        body::after {
            content: '';
            position: fixed;
            inset: 0;
            opacity: 0.04;
            pointer-events: none;
            z-index: 9998;
            background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 256 256' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noise'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.8' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noise)'/%3E%3C/svg%3E");
        }

        /* Spotlight Beam */
        .spotlight {
            position: absolute;
            width: 300px;
            height: 600px;
            background: linear-gradient(180deg, rgba(255,215,0,0.15) 0%, transparent 100%);
            clip-path: polygon(40% 0%, 60% 0%, 100% 100%, 0% 100%);
            pointer-events: none;
            opacity: 0;
            z-index: 1;
        }

        /* MJ Silhouette */
        .mj-silhouette {
            position: absolute;
            opacity: 0.06;
            z-index: 1;
            filter: drop-shadow(0 0 30px rgba(255,215,0,0.3));
        }

        /* Split text chars */
        .split-char {
            display: inline-block;
            opacity: 0;
            transform: translateY(80px) rotateX(-90deg);
        }

        /* Horizontal scroll section */
        .horizontal-section {
            overflow: hidden;
        }

        /* Gold glow text */
        .text-gold-glow {
            text-shadow: 0 0 20px rgba(255,215,0,0.4), 0 0 40px rgba(255,215,0,0.2), 0 0 80px rgba(255,215,0,0.1);
        }

        /* Vinyl Record */
        .vinyl {
            width: 120px;
            height: 120px;
            border-radius: 50%;
            background: conic-gradient(from 0deg, #1a1a1a, #2a2a2a, #1a1a1a, #2a2a2a, #1a1a1a);
            border: 3px solid rgba(255,215,0,0.3);
            position: relative;
        }
        .vinyl::after {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 30px;
            height: 30px;
            border-radius: 50%;
            background: #FFD700;
            border: 4px solid #0a0a0a;
        }
        @keyframes spin-vinyl {
            to { transform: rotate(360deg); }
        }

        /* Section divider with MJ flair */
        .mj-divider {
            position: relative;
            height: 120px;
            display: flex;
            align-items: center;
            justify-content: center;
            overflow: hidden;
        }
        .mj-divider::before, .mj-divider::after {
            content: '';
            flex: 1;
            height: 1px;
            background: linear-gradient(90deg, transparent, rgba(255,215,0,0.3), transparent);
        }

        /* Scroll progress bar */
        #scroll-progress {
            position: fixed;
            top: 0;
            left: 0;
            height: 3px;
            background: linear-gradient(90deg, #FFD700, #FFF8DC, #DAA520);
            z-index: 9999;
            transform-origin: left;
            transform: scaleX(0);
        }

        /* Parallax layer */
        .parallax-bg {
            position: absolute;
            inset: -20%;
            z-index: 0;
        }

        /* Image reveal clip */
        .img-reveal {
            clip-path: inset(100% 0% 0% 0%);
        }

        /* Quote marks decorative */
        .quote-mark {
            font-family: 'Playfair Display', serif;
            font-size: 8rem;
            line-height: 0;
            color: rgba(255,215,0,0.08);
            position: absolute;
        }

        /* Glowing border animation */
        @keyframes border-glow {
            0%, 100% { border-color: rgba(255,215,0,0.1); }
            50% { border-color: rgba(255,215,0,0.4); }
        }
        .glow-border {
            animation: border-glow 3s ease-in-out infinite;
        }

        /* Typewriter cursor */
        .typewriter-cursor {
            display: inline-block;
            width: 3px;
            height: 1em;
            background: #FFD700;
            margin-left: 4px;
            animation: blink 0.8s step-end infinite;
        }
        @keyframes blink {
            0%, 100% { opacity: 1; }
            50% { opacity: 0; }
        }

        /* Stage floor reflection */
        .stage-reflection {
            background: linear-gradient(180deg, transparent 0%, rgba(255,215,0,0.03) 50%, transparent 100%);
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            height: 40%;
            pointer-events: none;
        }
        img { pointer-events: none; -webkit-user-select: none; user-select: none; }
        body { -webkit-user-select: none; user-select: none; }
        input, textarea { -webkit-user-select: auto; user-select: auto; }
        @media print { body { display: none !important; } }
    </style>
</head>
<body>
    <script>
    document.addEventListener('contextmenu', function(e) { e.preventDefault(); });
    document.addEventListener('dragstart', function(e) { if (e.target.tagName === 'IMG') e.preventDefault(); });
    document.addEventListener('keydown', function(e) {
        if ((e.ctrlKey || e.metaKey) && (e.key === 's' || e.key === 'S' || e.key === 'u' || e.key === 'U')) e.preventDefault();
    });
    </script>

    <!-- ============================================ -->
    <!-- LOCK SCREEN -->
    <!-- ============================================ -->
    <div id="lock-screen" class="fixed inset-0 z-50 bg-black overflow-y-auto">
        <!-- Lock screen particles -->
        <div id="lock-particles" class="fixed inset-0 pointer-events-none overflow-hidden"></div>

        <!-- ===== STEP 1: Group Photo Question ===== -->
        <div id="step-1" class="min-h-screen flex flex-col items-center justify-center px-6 py-12 relative z-10" style="animation: fadeIn 1s ease-out">
            <!-- MJ Hat -->
            <svg width="60" height="38" viewBox="0 0 80 50" class="mb-6 opacity-50" style="animation: float 4s ease-in-out infinite">
                <ellipse cx="40" cy="42" rx="40" ry="8" fill="#FFD700" opacity="0.8"/>
                <ellipse cx="40" cy="38" rx="28" ry="20" fill="#1a1a1a" stroke="#FFD700" stroke-width="1.5"/>
                <path d="M12 38 Q40 10 68 38" fill="#1a1a1a" stroke="#FFD700" stroke-width="1"/>
                <rect x="28" y="22" width="24" height="6" rx="2" fill="#FFD700" opacity="0.6"/>
            </svg>

            <h1 class="font-display text-2xl sm:text-3xl md:text-4xl font-bold mb-2 text-gold-gradient text-center" style="animation: fadeInUp 0.8s ease-out 0.2s both">
                Einen Moment...
            </h1>
            <p class="text-white/50 text-sm sm:text-base mb-8 text-center max-w-md" style="animation: fadeInUp 0.8s ease-out 0.4s both">
                Bevor es losgeht, eine kurze Frage.
            </p>

            <!-- Group Photo -->
            <div class="w-full max-w-xl mb-8 rounded-2xl overflow-hidden border border-gold-300/20 shadow-lg shadow-gold-300/5" style="animation: fadeInUp 0.8s ease-out 0.6s both">
                <img src="assets/gruppe.jpg" alt="Die Gruppe" class="w-full h-auto block">
            </div>

            <p class="font-display text-xl sm:text-2xl font-semibold text-white text-center mb-8" style="animation: fadeInUp 0.8s ease-out 0.8s both">
                Bist du einer dieser Personen?
            </p>

            <div class="flex gap-4" style="animation: fadeInUp 0.8s ease-out 1s both">
                <button onclick="goToStep('password')" class="btn-gold text-sm tracking-wider uppercase px-8">
                    Ja, bin ich
                </button>
                <button onclick="goToStep('step-2')" class="px-8 py-3.5 rounded-xl border border-white/20 text-white/60 hover:text-white hover:border-gold-300/40 transition-all text-sm tracking-wider uppercase font-medium">
                    Nein
                </button>
            </div>
        </div>

        <!-- ===== STEP 2: Woman Photo Question ===== -->
        <div id="step-2" class="hidden min-h-screen flex flex-col items-center justify-center px-6 py-12 relative z-10">
            <p class="text-white/40 text-sm mb-6 text-center" style="animation: fadeInUp 0.8s ease-out 0.1s both">
                Hmm, okay... dann vielleicht...
            </p>

            <h2 class="font-display text-2xl sm:text-3xl font-bold mb-8 text-gold-gradient text-center" style="animation: fadeInUp 0.8s ease-out 0.3s both">
                Bist du eine dieser Personen?
            </h2>

            <!-- Photo -->
            <div class="w-full max-w-lg mb-8 rounded-2xl overflow-hidden border border-gold-300/20 shadow-lg shadow-gold-300/5" style="animation: fadeInUp 0.8s ease-out 0.5s both">
                <img src="assets/nicht-dabei.jpg" alt="" class="w-full h-auto block">
            </div>

            <div class="flex flex-col sm:flex-row gap-4" style="animation: fadeInUp 0.8s ease-out 0.7s both">
                <button onclick="redirectAway()" class="btn-gold text-sm tracking-wider uppercase px-8">
                    Ja, das bin ich
                </button>
                <button onclick="goToStep('password')" class="px-8 py-3.5 rounded-xl border border-white/20 text-white/60 hover:text-white hover:border-gold-300/40 transition-all text-sm tracking-wider uppercase font-medium">
                    Nein, ich bin jemand anderes
                </button>
            </div>
        </div>

        <!-- ===== STEP 3: Password Entry ===== -->
        <div id="step-password" class="hidden min-h-screen flex flex-col items-center justify-center px-6 py-12 relative z-10">
            <!-- Hat SVG -->
            <svg width="80" height="50" viewBox="0 0 80 50" class="mb-8 opacity-60" style="animation: float 4s ease-in-out infinite">
                <ellipse cx="40" cy="42" rx="40" ry="8" fill="#FFD700" opacity="0.8"/>
                <ellipse cx="40" cy="38" rx="28" ry="20" fill="#1a1a1a" stroke="#FFD700" stroke-width="1.5"/>
                <path d="M12 38 Q40 10 68 38" fill="#1a1a1a" stroke="#FFD700" stroke-width="1"/>
                <rect x="28" y="22" width="24" height="6" rx="2" fill="#FFD700" opacity="0.6"/>
            </svg>

            <!-- Title -->
            <h1 class="font-display text-3xl sm:text-4xl md:text-5xl font-bold mb-4 text-gold-gradient">
                The Show Must Go On
            </h1>

            <!-- Funny subtitle -->
            <p class="text-white/50 text-sm sm:text-base md:text-lg mb-2 max-w-md leading-relaxed text-center">
                Wenn du diese Seite betrittst,<br>bist du bereits Teil von
            </p>
            <p class="text-gold-gradient font-display text-2xl sm:text-3xl font-bold mb-10">
                Babaks Scheidung
            </p>

            <!-- Disclaimer -->
            <p class="text-white/20 text-xs mb-8 max-w-xs text-center">
                * Vom Junggesellenleben. Kein Anwalt n√∂tig. Vielleicht.
            </p>

            <!-- Password Input -->
            <div class="relative">
                <input
                    type="password"
                    id="password-input"
                    class="lock-input"
                    placeholder="Passwort"
                    autocomplete="off"
                    spellcheck="false"
                >
                <p id="error-msg" class="text-red-400 text-sm mt-3 opacity-0 transition-opacity duration-300">
                    Wrong key, Smooth Criminal. Versuch's nochmal.
                </p>
            </div>

            <!-- Enter Button -->
            <button id="enter-btn" class="btn-gold mt-6 text-sm tracking-wider uppercase">
                Eintreten
            </button>

            <!-- Small hint -->
            <p class="text-white/10 text-xs mt-12">
                ‚ô™ Just Beat It... oder gib das richtige Passwort ein ‚ô™
            </p>
        </div>
    </div>

    <!-- ============================================ -->
    <!-- MAIN CONTENT (hidden until unlocked) -->
    <!-- ============================================ -->
    <div id="main-content" class="hidden">

        <!-- Scroll Progress Bar -->
        <div id="scroll-progress"></div>

        <!-- Persistent Gold Particles -->
        <div id="main-particles" class="fixed inset-0 pointer-events-none z-30 overflow-hidden"></div>

        <!-- ====== STICKY NAVIGATION ====== -->
        <nav id="navbar" class="fixed top-0 w-full z-40 transition-all duration-500" style="background: rgba(10,10,10,0.85); backdrop-filter: blur(20px); border-bottom: 1px solid rgba(255,215,0,0.1);">
            <div class="max-w-6xl mx-auto px-6 py-4 flex items-center justify-between">
                <!-- Logo/Title -->
                <a href="#hero" class="font-display text-xl font-bold text-gold-gradient tracking-wide">BAM</a>

                <!-- Desktop Nav Links -->
                <div class="hidden sm:flex items-center gap-8">
                    <a href="#story" class="nav-link">Story</a>
                    <a href="#videos" class="nav-link">Videos</a>
                    <a href="#kommentare" class="nav-link">Gr√º√üe</a>
                    <button onclick="window.bamLogout()" class="nav-link text-white/30 hover:text-red-400 transition-colors ml-2 text-sm">Logout</button>
                </div>

                <!-- Mobile Menu Button -->
                <button id="mobile-menu-btn" class="sm:hidden text-white/60 hover:text-gold-300 transition-colors">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <line x1="3" y1="6" x2="21" y2="6"/><line x1="3" y1="12" x2="21" y2="12"/><line x1="3" y1="18" x2="21" y2="18"/>
                    </svg>
                </button>
            </div>

            <!-- Mobile Menu -->
            <div id="mobile-menu" class="hidden sm:hidden border-t border-white/5">
                <div class="px-6 py-4 flex flex-col gap-4">
                    <a href="#story" class="nav-link">Story</a>
                    <a href="#videos" class="nav-link">Videos</a>
                    <a href="#kommentare" class="nav-link">Gr√º√üe</a>
                    <button onclick="window.bamLogout()" class="nav-link text-white/30 hover:text-red-400 transition-colors text-left text-sm mt-2 pt-2 border-t border-white/5">Logout</button>
                </div>
            </div>
        </nav>

        <!-- ====== HERO SECTION ====== -->
        <section id="hero" class="relative min-h-screen flex flex-col items-center justify-center hero-bg overflow-hidden px-6">
            <!-- Spotlight Beams -->
            <div class="spotlight" id="spotlight-l" style="left: 10%; top: -50px; transform: rotate(-8deg);"></div>
            <div class="spotlight" id="spotlight-r" style="right: 10%; top: -50px; transform: rotate(8deg);"></div>

            <!-- MJ Dancing Silhouette (left) -->
            <svg class="mj-silhouette hidden sm:block" style="left: 5%; bottom: 10%; width: 180px;" id="mj-sil-left" viewBox="0 0 200 400" fill="currentColor" color="#FFD700">
                <path d="M100 20 C90 20 85 30 85 40 C85 55 90 60 100 60 C110 60 115 55 115 40 C115 30 110 20 100 20Z M70 70 L60 160 L50 200 L70 200 L80 170 L100 240 L85 380 L95 385 L115 260 L135 385 L145 380 L130 240 L140 170 L150 200 L160 200 L150 160 L140 70 Z"/>
            </svg>

            <!-- MJ Moonwalk Silhouette (right) -->
            <svg class="mj-silhouette hidden sm:block" style="right: 5%; bottom: 10%; width: 160px;" id="mj-sil-right" viewBox="0 0 200 400" fill="currentColor" color="#FFD700">
                <path d="M110 20 C100 20 95 30 95 40 C95 55 100 60 110 60 C120 60 125 55 125 40 C125 30 120 20 110 20Z M80 70 L55 180 L40 210 L60 215 L75 185 L90 250 L70 380 L82 385 L105 265 L125 385 L137 380 L120 250 L135 185 L155 215 L170 210 L150 180 L130 70Z"/>
            </svg>

            <!-- Stage Floor Reflection -->
            <div class="stage-reflection"></div>

            <!-- Decorative floating music notes (parallax) -->
            <div class="float-element top-20 left-10 text-gold-300 text-6xl" data-speed="0.3" style="animation-delay: 0s;">‚ô™</div>
            <div class="float-element top-40 right-16 text-gold-300 text-4xl" data-speed="0.5" style="animation-delay: 1s;">‚ô´</div>
            <div class="float-element bottom-32 left-20 text-gold-300 text-5xl" data-speed="0.2" style="animation-delay: 2s;">‚òÖ</div>
            <div class="float-element bottom-20 right-10 text-gold-300 text-3xl" data-speed="0.4" style="animation-delay: 3s;">‚ô™</div>
            <div class="float-element top-60 left-[30%] text-gold-300 text-3xl" data-speed="0.6" style="animation-delay: 1.5s;">‚ô´</div>
            <div class="float-element bottom-40 right-[25%] text-gold-300 text-4xl" data-speed="0.35" style="animation-delay: 2.5s;">‚òÖ</div>

            <!-- Main hero content -->
            <div class="text-center z-10 max-w-4xl">
                <!-- Small label -->
                <p id="hero-label" class="text-gold-400 text-sm tracking-[0.3em] uppercase mb-6 font-medium opacity-0">
                    Der Untergang von
                </p>

                <!-- Big Name ‚Äî will be split into chars by GSAP -->
                <h1 id="hero-name" class="font-display text-6xl sm:text-7xl md:text-8xl lg:text-9xl font-black mb-2 text-gold-gradient text-gold-glow leading-none opacity-0">
                    BABAK
                </h1>
                <p id="hero-surname" class="font-display text-xl sm:text-2xl md:text-3xl font-light text-gold-300/50 tracking-[0.2em] mb-6 opacity-0">
                    AMINI MOGHADAM
                </p>

                <!-- Subtitle -->
                <p id="hero-subtitle" class="text-white/60 text-lg sm:text-xl md:text-2xl font-light max-w-2xl mx-auto mb-4 leading-relaxed opacity-0">
                    "Remember the Time" ‚Äî Ein Abend, der in die Geschichte eingeht.
                </p>

                <!-- MJ Quote with typewriter -->
                <p id="hero-quote" class="font-display italic text-gold-400/60 text-base sm:text-lg mt-8 opacity-0">
                    "Don't stop 'til you get enough"
                </p>

                <!-- Vinyl Record -->
                <div id="hero-vinyl" class="flex justify-center mt-10 opacity-0">
                    <div class="vinyl" id="vinyl-disc"></div>
                </div>

                <!-- Divider -->
                <div id="hero-divider" class="gold-divider mt-8 mb-8 opacity-0"></div>

                <!-- Scroll indicator -->
                <div id="scroll-hint" class="mt-8 opacity-0">
                    <a href="#story" class="inline-flex flex-col items-center text-white/30 hover:text-gold-300 transition-colors duration-300">
                        <span class="text-xs tracking-widest uppercase mb-2">Scroll</span>
                        <svg width="20" height="30" viewBox="0 0 20 30" class="animate-bounce">
                            <rect x="7" y="1" width="6" height="12" rx="3" stroke="currentColor" stroke-width="1.5" fill="none"/>
                            <circle cx="10" cy="7" r="1.5" fill="currentColor" class="animate-pulse"/>
                            <path d="M10 18 L10 26 M6 22 L10 26 L14 22" stroke="currentColor" stroke-width="1.5" fill="none" stroke-linecap="round"/>
                        </svg>
                    </a>
                </div>
            </div>
        </section>

        <!-- ====== STORY SECTION ====== -->
        <section id="story" class="relative py-24 sm:py-32 px-6">
            <div class="max-w-5xl mx-auto">
                <!-- Section Header -->
                <div class="text-center mb-16 reveal">
                    <p class="text-gold-400 text-sm tracking-[0.3em] uppercase mb-3 font-medium">Kapitel 1</p>
                    <h2 class="font-display text-4xl sm:text-5xl md:text-6xl font-bold text-gold-gradient mb-4">
                        Remember The Time
                    </h2>
                    <p class="text-white/40 max-w-xl mx-auto text-base sm:text-lg">
                        Die Geschichte eines Mannes, der bald den wichtigsten Schritt seines Lebens geht.
                    </p>
                    <div class="gold-divider mt-8"></div>
                </div>

                <!-- Story Content Grid -->
                <div class="grid md:grid-cols-2 gap-12 items-center mb-20">
                    <!-- Text Block -->
                    <div class="reveal-left">
                        <h3 class="font-display text-2xl sm:text-3xl font-semibold text-white mb-6">
                            Wer ist Babak?
                        </h3>
                        <p class="text-white/50 leading-relaxed mb-4">
                            Hier kommt die Geschichte hin. Wer ist Babak, was macht ihn besonders,
                            warum feiern wir ihn? Lustige Anekdoten, unvergessliche Momente,
                            und warum er der King of Pop in unserem Herzen ist.
                        </p>
                        <p class="text-white/50 leading-relaxed">
                            F√ºge hier pers√∂nliche Geschichten ein, die nur die engsten Freunde kennen.
                            Das macht die Seite besonders und einzigartig.
                        </p>
                    </div>

                    <!-- Image Placeholder -->
                    <div class="reveal-right">
                        <div class="relative group">
                            <div class="aspect-[4/3] rounded-2xl overflow-hidden border border-gold-300/10 bg-dark-50">
                                <!-- Replace src with actual image -->
                                <div class="w-full h-full flex items-center justify-center bg-gradient-to-br from-gold-300/5 to-transparent">
                                    <div class="text-center">
                                        <p class="text-gold-300/30 text-6xl mb-4">üì∏</p>
                                        <p class="text-white/20 text-sm">Babaks Foto hier</p>
                                    </div>
                                </div>
                            </div>
                            <!-- Decorative corner -->
                            <div class="absolute -top-3 -right-3 w-12 h-12 border-t-2 border-r-2 border-gold-300/30 rounded-tr-xl"></div>
                            <div class="absolute -bottom-3 -left-3 w-12 h-12 border-b-2 border-l-2 border-gold-300/30 rounded-bl-xl"></div>
                        </div>
                    </div>
                </div>

                <!-- Second Story Block (reversed) -->
                <div class="grid md:grid-cols-2 gap-12 items-center mb-20">
                    <!-- Image -->
                    <div class="reveal-left order-2 md:order-1">
                        <div class="relative group">
                            <div class="aspect-[4/3] rounded-2xl overflow-hidden border border-gold-300/10 bg-dark-50">
                                <div class="w-full h-full flex items-center justify-center bg-gradient-to-br from-gold-300/5 to-transparent">
                                    <div class="text-center">
                                        <p class="text-gold-300/30 text-6xl mb-4">üé§</p>
                                        <p class="text-white/20 text-sm">Noch ein Foto</p>
                                    </div>
                                </div>
                            </div>
                            <div class="absolute -top-3 -left-3 w-12 h-12 border-t-2 border-l-2 border-gold-300/30 rounded-tl-xl"></div>
                            <div class="absolute -bottom-3 -right-3 w-12 h-12 border-b-2 border-r-2 border-gold-300/30 rounded-br-xl"></div>
                        </div>
                    </div>

                    <!-- Text -->
                    <div class="reveal-right order-1 md:order-2">
                        <h3 class="font-display text-2xl sm:text-3xl font-semibold text-white mb-6">
                            Die Highlights
                        </h3>
                        <p class="text-white/50 leading-relaxed mb-4">
                            Weitere Geschichten und Anekdoten. Vielleicht eine Timeline der
                            besten Momente? Oder lustige Zitate, die Babak gesagt hat?
                        </p>
                        <p class="text-white/50 leading-relaxed">
                            Die besten Erinnerungen sind die, die man mit den richtigen
                            Menschen teilt. Und heute Abend wird eine neue dazukommen.
                        </p>
                    </div>
                </div>

                <!-- Quote Banner -->
                <div class="reveal-scale text-center py-16 px-8 rounded-2xl border border-gold-300/10 bg-gradient-to-r from-transparent via-gold-300/5 to-transparent relative overflow-hidden glow-border">
                    <span class="quote-mark" style="top: -20px; left: 20px;">"</span>
                    <span class="quote-mark" style="bottom: -60px; right: 20px;">"</span>
                    <p class="font-display italic text-2xl sm:text-3xl text-gold-300/80 mb-4 relative z-10">
                        "If you wanna make the world a better place,<br>take a look at yourself and make a change."
                    </p>
                    <p class="text-white/30 text-sm relative z-10">‚Äî Michael Jackson, Man In The Mirror</p>
                </div>
            </div>
        </section>

        <!-- MJ Divider -->
        <div class="mj-divider">
            <span class="text-gold-300/20 text-2xl mx-6">‚ô™ ‚ô´ ‚ô™</span>
        </div>

        <!-- ====== VIDEOS SECTION ====== -->
        <section id="videos" class="relative py-24 sm:py-32 px-6 section-glow">
            <div class="max-w-5xl mx-auto">
                <!-- Section Header -->
                <div class="text-center mb-16 reveal">
                    <p class="text-gold-400 text-sm tracking-[0.3em] uppercase mb-3 font-medium">Kapitel 2</p>
                    <h2 class="font-display text-4xl sm:text-5xl md:text-6xl font-bold text-gold-gradient mb-4">
                        Thriller Night
                    </h2>
                    <p class="text-white/40 max-w-xl mx-auto text-base sm:text-lg">
                        Die besten Video-Momente. Press Play und genie√ü die Show.
                    </p>
                    <div class="gold-divider mt-8"></div>
                </div>

                <!-- Video Grid -->
                <div class="grid gap-8 md:gap-10">
                    <!-- Video 1 -->
                    <div class="video-card reveal">
                        <div class="p-4 sm:p-5 border-b border-gold-300/10">
                            <h3 class="font-display text-lg sm:text-xl font-semibold text-white flex items-center gap-3">
                                <span class="text-gold-300">‚ñ∂</span>
                                MOV00605
                            </h3>
                        </div>
                        <iframe
                            src="https://www.youtube-nocookie.com/embed/M2uVAhKDSXs?rel=0&modestbranding=1&iv_load_policy=3&disablekb=1&fs=0&color=white&cc_load_policy=0"
                            title="MOV00605"
                            frameborder="0"
                            allow="accelerometer; encrypted-media; gyroscope"
                            loading="lazy"
                        ></iframe>
                    </div>

                    <!-- Video 2 -->
                    <div class="video-card reveal">
                        <div class="p-4 sm:p-5 border-b border-gold-300/10">
                            <h3 class="font-display text-lg sm:text-xl font-semibold text-white flex items-center gap-3">
                                <span class="text-gold-300">‚ñ∂</span>
                                K√ºs
                            </h3>
                        </div>
                        <iframe
                            src="https://www.youtube-nocookie.com/embed/jqzwAVDnvMQ?rel=0&modestbranding=1&iv_load_policy=3&disablekb=1&fs=0&color=white&cc_load_policy=0"
                            title="K√ºs"
                            frameborder="0"
                            allow="accelerometer; encrypted-media; gyroscope"
                            loading="lazy"
                        ></iframe>
                    </div>
                </div>
            </div>
        </section>

        <!-- MJ Divider -->
        <div class="mj-divider">
            <span class="text-gold-300/20 text-2xl mx-6">‚òÖ ‚ô´ ‚òÖ</span>
        </div>

        <!-- ====== COMMENTS SECTION ====== -->
        <section id="kommentare" class="relative py-24 sm:py-32 px-6">
            <div class="max-w-3xl mx-auto">
                <!-- Section Header -->
                <div class="text-center mb-16 reveal">
                    <p class="text-gold-400 text-sm tracking-[0.3em] uppercase mb-3 font-medium">Kapitel 3</p>
                    <h2 class="font-display text-4xl sm:text-5xl md:text-6xl font-bold text-gold-gradient mb-4">
                        You Are Not Alone
                    </h2>
                    <p class="text-white/40 max-w-xl mx-auto text-base sm:text-lg">
                        Hinterlass Babak ein paar warme Worte. Er wird sie brauchen.
                    </p>
                    <div class="gold-divider mt-8"></div>
                </div>

                <!-- Comment Form -->
                <div class="reveal mb-16">
                    <div class="rounded-2xl border border-gold-300/10 bg-gradient-to-b from-gold-300/5 to-transparent p-6 sm:p-8">
                        <div class="flex items-center gap-3 mb-6">
                            <span class="text-2xl">‚úçÔ∏è</span>
                            <h3 class="font-display text-xl font-semibold text-white">Schreib was Nettes</h3>
                        </div>

                        <div class="space-y-4">
                            <div>
                                <label class="text-white/40 text-sm mb-2 block">Dein Name</label>
                                <input type="text" id="comment-name" class="comment-input" placeholder="Wie hei√üt du?" maxlength="50">
                            </div>
                            <div>
                                <label class="text-white/40 text-sm mb-2 block">Deine Nachricht</label>
                                <textarea id="comment-message" class="comment-input" rows="4" placeholder="Was willst du Babak sagen?" maxlength="500" style="resize: vertical;"></textarea>
                            </div>
                            <div class="flex items-center justify-between">
                                <span id="char-count" class="text-white/20 text-xs">0 / 500</span>
                                <button id="submit-comment" class="btn-gold text-sm" onclick="submitComment()">
                                    Absenden ‚ú®
                                </button>
                            </div>
                        </div>

                        <!-- Success message -->
                        <div id="comment-success" class="hidden mt-4 p-4 rounded-xl bg-green-500/10 border border-green-500/20 text-green-400 text-sm text-center">
                            Danke! Dein Gru√ü wurde gespeichert üåü
                        </div>
                    </div>
                </div>

                <!-- Comments Display -->
                <div class="reveal">
                    <div class="flex items-center gap-3 mb-8">
                        <span class="text-xl">üí¨</span>
                        <h3 class="font-display text-xl font-semibold text-white">Gr√º√üe von allen</h3>
                        <span id="comment-count" class="text-white/30 text-sm">(0)</span>
                    </div>

                    <div id="comments-container" class="space-y-4">
                        <!-- Comments will be loaded here -->
                        <div id="comments-loading" class="flex justify-center py-8">
                            <div class="spinner"></div>
                        </div>
                        <div id="no-comments" class="hidden text-center py-12 text-white/20">
                            <p class="text-4xl mb-3">üé§</p>
                            <p>Noch keine Gr√º√üe. Sei der Erste!</p>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- ====== FOOTER ====== -->
        <footer class="relative py-16 px-6 border-t border-gold-300/10">
            <div class="max-w-4xl mx-auto text-center">
                <div class="gold-divider mb-8"></div>

                <!-- MJ Hat -->
                <svg width="50" height="32" viewBox="0 0 80 50" class="mx-auto mb-6 opacity-30">
                    <ellipse cx="40" cy="42" rx="40" ry="8" fill="#FFD700"/>
                    <ellipse cx="40" cy="38" rx="28" ry="20" fill="#0a0a0a" stroke="#FFD700" stroke-width="1.5"/>
                    <path d="M12 38 Q40 10 68 38" fill="#0a0a0a" stroke="#FFD700" stroke-width="1"/>
                    <rect x="28" y="22" width="24" height="6" rx="2" fill="#FFD700" opacity="0.6"/>
                </svg>

                <p class="font-display italic text-gold-300/40 text-lg mb-4">
                    "This is it."
                </p>

                <p class="text-white/20 text-sm mb-2">
                    Eine Smooth Criminal Production
                </p>
                <p class="text-white/10 text-xs">
                    &copy; 2026 ‚Äî Made with üñ§ & Glitzer
                </p>
            </div>
        </footer>
    </div>

    <!-- ============================================ -->
    <!-- JAVASCRIPT -->
    <!-- ============================================ -->
    <script>
    // ---- Step Navigation (global, needed for onclick) ----
    function goToStep(stepId) {
        // Hide all steps inside lock-screen
        ['step-1', 'step-2', 'step-password'].forEach(function(id) {
            var el = document.getElementById(id);
            if (el) { el.classList.add('hidden'); el.style.animation = ''; }
        });

        // Map shorthand
        var targetId = (stepId === 'password') ? 'step-password' : stepId;
        var target = document.getElementById(targetId);
        if (target) {
            target.classList.remove('hidden');
            target.style.animation = 'fadeIn 0.6s ease-out';
        }

        // Focus password input
        if (stepId === 'password') {
            setTimeout(function() {
                var inp = document.getElementById('password-input');
                if (inp) inp.focus();
            }, 400);
        }
    }

    // Redirect URL for the woman
    var REDIRECT_URL = 'https://www.youtube.com/watch?v=0RDAJ9V-cv8';

    function redirectAway() {
        document.getElementById('lock-screen').style.transition = 'opacity 0.5s ease';
        document.getElementById('lock-screen').style.opacity = '0';
        setTimeout(function() { window.location.href = REDIRECT_URL; }, 500);
    }
    </script>

    <script>
    (function() {
        'use strict';

        // ---- Configuration ----
        const CONFIG = {
            SUPABASE_URL: 'https://qqugnwurwfwumgrieitb.supabase.co',
            SUPABASE_ANON_KEY: 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InFxdWdud3Vyd2Z3dW1ncmllaXRiIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NzE4NTI2MjEsImV4cCI6MjA4NzQyODYyMX0.20yuHhinysRghRgdSkPAAAFNhRU7E1sHsBLsBcjRkHs',
            // Password (for dev only ‚Äî in production, encryption handles this)
            PASSWORD_HASH: null
        };

        // ---- Password / Lock Screen (dev mode only) ----
        const passwordInput = document.getElementById('password-input');
        const enterBtn = document.getElementById('enter-btn');
        const errorMsg = document.getElementById('error-msg');
        const lockScreen = document.getElementById('lock-screen');
        const mainContent = document.getElementById('main-content');

        // In encrypted build, lock screen elements don't exist here.
        // Detect and skip to initMainPage directly.
        if (!enterBtn) {
            initMainPage();
        } else {
            async function hashPassword(pw) {
                const encoder = new TextEncoder();
                const data = encoder.encode(pw);
                const hashBuffer = await crypto.subtle.digest('SHA-256', data);
                const hashArray = Array.from(new Uint8Array(hashBuffer));
                return hashArray.map(b => b.toString(16).padStart(2, '0')).join('');
            }

            const CORRECT_HASH = '7c0da27eb748a30dbee03550e5b5cd651e2a4e25e34e2860eebd21e4e9a3be71';

            async function tryUnlock() {
                const pw = passwordInput.value;
                const hash = await hashPassword(pw);

                if (hash === CORRECT_HASH) {
                    lockScreen.style.transition = 'opacity 0.8s ease, transform 0.8s ease';
                    lockScreen.style.opacity = '0';
                    lockScreen.style.transform = 'scale(1.05)';

                    setTimeout(() => {
                        lockScreen.style.display = 'none';
                        mainContent.classList.remove('hidden');
                        mainContent.style.animation = 'fadeIn 1s ease-out';
                        sparklesEnabled = true;
                        initMainPage();
                        try {
                            var a = new Audio('assets/intro.mp3'); a.volume = 0.5; a.play();
                            setTimeout(function() { a.pause(); }, 3000);
                            var resumed = false;
                            window.addEventListener('scroll', function() {
                                if (!resumed && a.paused) { resumed = true; a.play(); }
                            }, { once: true });
                        } catch(e) {}
                    }, 800);
                } else {
                    passwordInput.classList.add('shake');
                    errorMsg.style.opacity = '1';
                    passwordInput.style.borderColor = 'rgba(239, 68, 68, 0.5)';

                    setTimeout(() => {
                        passwordInput.classList.remove('shake');
                        passwordInput.style.borderColor = 'rgba(255, 215, 0, 0.3)';
                    }, 600);

                    setTimeout(() => {
                        errorMsg.style.opacity = '0';
                    }, 3000);
                }
            }

            enterBtn.addEventListener('click', tryUnlock);
            passwordInput.addEventListener('keydown', (e) => {
                if (e.key === 'Enter') tryUnlock();
            });
        }

        // ---- Particle System ----
        function createParticles(containerId, count) {
            const container = document.getElementById(containerId);
            if (!container) return;

            for (let i = 0; i < count; i++) {
                const particle = document.createElement('div');
                const isStar = Math.random() > 0.6;
                const size = isStar ? (Math.random() * 8 + 4) : (Math.random() * 4 + 2);

                particle.className = `particle ${isStar ? 'particle-star' : 'particle-gold'}`;
                particle.style.cssText = `
                    width: ${size}px;
                    height: ${size}px;
                    left: ${Math.random() * 100}%;
                    animation: fall ${Math.random() * 8 + 6}s linear infinite;
                    animation-delay: ${Math.random() * 10}s;
                `;
                container.appendChild(particle);
            }
        }

        // Start lock screen particles
        createParticles('lock-particles', 40);

        // ---- Cursor Sparkle Trail ----
        let sparkleThrottle = 0;
        let sparklesEnabled = !lockScreen; // Enable immediately in encrypted mode
        document.addEventListener('mousemove', (e) => {
            if (!sparklesEnabled) return;
            if (Date.now() - sparkleThrottle < 50) return;
            sparkleThrottle = Date.now();

            const sparkle = document.createElement('div');
            sparkle.className = 'cursor-sparkle';
            sparkle.style.left = e.clientX + 'px';
            sparkle.style.top = e.clientY + 'px';
            document.body.appendChild(sparkle);
            setTimeout(() => sparkle.remove(), 600);
        });

        // ---- Logout ----
        window.bamLogout = function() {
            try {
                sessionStorage.removeItem('bam_pw');
                sessionStorage.removeItem('bam_ts');
            } catch(e) {}
            location.reload();
        };

        // ---- Initialize Main Page ----
        function initMainPage() {
            // Create main particles
            createParticles('main-particles', 25);

            // ===== GSAP ANIMATIONS =====
            if (typeof gsap !== 'undefined' && typeof ScrollTrigger !== 'undefined') {
                gsap.registerPlugin(ScrollTrigger);

                // -- Scroll Progress Bar --
                gsap.to('#scroll-progress', {
                    scaleX: 1,
                    ease: 'none',
                    scrollTrigger: { trigger: 'body', start: 'top top', end: 'bottom bottom', scrub: 0.3 }
                });

                // -- Hero Entry Timeline --
                var heroTL = gsap.timeline({ delay: 0.3 });
                heroTL
                    .to('#spotlight-l, #spotlight-r', { opacity: 0.8, duration: 1.5, ease: 'power2.out' })
                    .to('#hero-label', { opacity: 1, y: 0, duration: 0.6, ease: 'power2.out' }, 0.2)
                    .fromTo('#hero-name', { opacity: 0, scale: 0.5, rotationX: -45 },
                        { opacity: 1, scale: 1, rotationX: 0, duration: 1.2, ease: 'back.out(1.4)' }, 0.4)
                    .to('#hero-surname', { opacity: 1, duration: 0.8, ease: 'power2.out' }, 0.9)
                    .to('#hero-subtitle', { opacity: 1, y: 0, duration: 0.8, ease: 'power2.out' }, 1.1)
                    .to('#hero-quote', { opacity: 1, duration: 0.8, ease: 'power2.out' }, 1.4)
                    .to('#hero-vinyl', { opacity: 1, scale: 1, duration: 0.6, ease: 'back.out(1.7)' }, 1.6)
                    .to('#hero-divider', { opacity: 1, scaleX: 1, duration: 0.8, ease: 'power2.inOut' }, 1.8)
                    .to('#scroll-hint', { opacity: 1, duration: 0.6 }, 2.0)
                    .to('#mj-sil-left, #mj-sil-right', { opacity: 0.06, duration: 1.5, ease: 'power2.out' }, 0.8);

                // -- Vinyl Spin on Scroll --
                gsap.to('#vinyl-disc', {
                    rotation: 720,
                    ease: 'none',
                    scrollTrigger: { trigger: '#hero', start: 'top top', end: 'bottom top', scrub: 1 }
                });

                // -- Hero Parallax ‚Äî elements move at different speeds --
                document.querySelectorAll('.float-element[data-speed]').forEach(function(el) {
                    gsap.to(el, {
                        yPercent: -100 * parseFloat(el.dataset.speed),
                        ease: 'none',
                        scrollTrigger: { trigger: '#hero', start: 'top top', end: 'bottom top', scrub: true }
                    });
                });

                // -- MJ Silhouettes Parallax --
                gsap.to('#mj-sil-left', {
                    yPercent: -30, ease: 'none',
                    scrollTrigger: { trigger: '#hero', start: 'top top', end: 'bottom top', scrub: true }
                });
                gsap.to('#mj-sil-right', {
                    yPercent: -50, ease: 'none',
                    scrollTrigger: { trigger: '#hero', start: 'top top', end: 'bottom top', scrub: true }
                });

                // -- Spotlight Beams follow scroll --
                gsap.to('#spotlight-l', {
                    rotation: -15, yPercent: 20, ease: 'none',
                    scrollTrigger: { trigger: '#hero', start: 'top top', end: 'bottom top', scrub: true }
                });
                gsap.to('#spotlight-r', {
                    rotation: 15, yPercent: 20, ease: 'none',
                    scrollTrigger: { trigger: '#hero', start: 'top top', end: 'bottom top', scrub: true }
                });

                // -- Section Headers: dramatic clip-path reveal --
                gsap.utils.toArray('section h2').forEach(function(h2) {
                    gsap.from(h2, {
                        clipPath: 'inset(100% 0% 0% 0%)',
                        opacity: 0,
                        duration: 1.2,
                        ease: 'power4.inOut',
                        scrollTrigger: { trigger: h2, start: 'top 85%' }
                    });
                });

                // -- Story text blocks: slide in --
                gsap.utils.toArray('.reveal-left').forEach(function(el) {
                    gsap.from(el, {
                        x: -80, opacity: 0, duration: 1, ease: 'power3.out',
                        scrollTrigger: { trigger: el, start: 'top 85%' }
                    });
                });
                gsap.utils.toArray('.reveal-right').forEach(function(el) {
                    gsap.from(el, {
                        x: 80, opacity: 0, duration: 1, ease: 'power3.out',
                        scrollTrigger: { trigger: el, start: 'top 85%' }
                    });
                });

                // -- Video Cards: stagger slide up --
                ScrollTrigger.batch('.video-card', {
                    onEnter: function(elements) {
                        gsap.from(elements, {
                            opacity: 0, y: 60, scale: 0.95, stagger: 0.2, duration: 0.8, ease: 'power3.out'
                        });
                    },
                    start: 'top 85%'
                });

                // -- Quote Banner: scale up on scroll --
                gsap.from('.reveal-scale', {
                    scale: 0.85, opacity: 0, duration: 1.2, ease: 'power2.out',
                    scrollTrigger: { trigger: '.reveal-scale', start: 'top 85%' }
                });

                // -- Comment Bubbles: stagger on enter --
                ScrollTrigger.batch('.comment-bubble', {
                    onEnter: function(elements) {
                        gsap.from(elements, {
                            opacity: 0, y: 30, stagger: 0.08, duration: 0.5, ease: 'power2.out'
                        });
                    },
                    start: 'top 90%'
                });

                // -- MJ Dividers: music notes pulse --
                gsap.utils.toArray('.mj-divider span').forEach(function(span) {
                    gsap.from(span, {
                        scale: 0, opacity: 0, duration: 0.8, ease: 'back.out(2)',
                        scrollTrigger: { trigger: span, start: 'top 90%' }
                    });
                });

                // -- Footer: fade in from bottom --
                gsap.from('footer', {
                    opacity: 0, y: 40, duration: 1, ease: 'power2.out',
                    scrollTrigger: { trigger: 'footer', start: 'top 95%' }
                });

                // -- Parallax background glow on sections --
                gsap.utils.toArray('.section-glow').forEach(function(section) {
                    gsap.to(section, {
                        backgroundPosition: '50% 30%',
                        ease: 'none',
                        scrollTrigger: { trigger: section, start: 'top bottom', end: 'bottom top', scrub: true }
                    });
                });

            } else {
                // Fallback: simple IntersectionObserver if GSAP not loaded
                var revealElements = document.querySelectorAll('.reveal, .reveal-left, .reveal-right, .reveal-scale');
                var revealObserver = new IntersectionObserver(function(entries) {
                    entries.forEach(function(entry) {
                        if (entry.isIntersecting) entry.target.classList.add('active');
                    });
                }, { threshold: 0.1, rootMargin: '0px 0px -50px 0px' });
                revealElements.forEach(function(el) { revealObserver.observe(el); });
            }

            // ===== ORIGINAL FUNCTIONALITY =====

            // Active nav link on scroll
            const sections = document.querySelectorAll('section[id]');
            const navLinks = document.querySelectorAll('.nav-link');

            window.addEventListener('scroll', () => {
                const scrollY = window.scrollY + 100;

                sections.forEach(section => {
                    const top = section.offsetTop;
                    const height = section.offsetHeight;
                    const id = section.getAttribute('id');

                    if (scrollY >= top && scrollY < top + height) {
                        navLinks.forEach(link => {
                            link.classList.remove('active');
                            if (link.getAttribute('href') === '#' + id) {
                                link.classList.add('active');
                            }
                        });
                    }
                });

                // Navbar background on scroll
                const navbar = document.getElementById('navbar');
                if (scrollY > 50) {
                    navbar.style.borderBottomColor = 'rgba(255, 215, 0, 0.15)';
                    navbar.style.background = 'rgba(10, 10, 10, 0.95)';
                } else {
                    navbar.style.borderBottomColor = 'rgba(255, 215, 0, 0.1)';
                    navbar.style.background = 'rgba(10, 10, 10, 0.85)';
                }
            });

            // Mobile menu toggle
            const mobileMenuBtn = document.getElementById('mobile-menu-btn');
            const mobileMenu = document.getElementById('mobile-menu');
            mobileMenuBtn.addEventListener('click', () => {
                mobileMenu.classList.toggle('hidden');
            });

            // Close mobile menu on link click
            mobileMenu.querySelectorAll('a').forEach(link => {
                link.addEventListener('click', () => {
                    mobileMenu.classList.add('hidden');
                });
            });

            // Load comments
            loadComments();
        }

        // ---- Comments System ----
        const commentNameInput = document.getElementById('comment-name');
        const commentMessageInput = document.getElementById('comment-message');
        const charCount = document.getElementById('char-count');

        if (commentMessageInput) {
            commentMessageInput.addEventListener('input', () => {
                charCount.textContent = `${commentMessageInput.value.length} / 500`;
            });
        }

        async function loadComments() {
            const container = document.getElementById('comments-container');
            const loading = document.getElementById('comments-loading');
            const noComments = document.getElementById('no-comments');
            const countEl = document.getElementById('comment-count');

            if (!CONFIG.SUPABASE_URL || !CONFIG.SUPABASE_ANON_KEY) {
                // No Supabase configured ‚Äî show local comments from localStorage
                loading.classList.add('hidden');
                const localComments = JSON.parse(localStorage.getItem('babak-comments') || '[]');
                if (localComments.length === 0) {
                    noComments.classList.remove('hidden');
                    countEl.textContent = '(0)';
                } else {
                    countEl.textContent = `(${localComments.length})`;
                    renderComments(localComments);
                }
                return;
            }

            try {
                const res = await fetch(
                    `${CONFIG.SUPABASE_URL}/rest/v1/comments?order=created_at.desc`,
                    { headers: { 'apikey': CONFIG.SUPABASE_ANON_KEY } }
                );
                const comments = await res.json();
                loading.classList.add('hidden');

                if (comments.length === 0) {
                    noComments.classList.remove('hidden');
                    countEl.textContent = '(0)';
                } else {
                    countEl.textContent = `(${comments.length})`;
                    renderComments(comments);
                }
            } catch (err) {
                loading.classList.add('hidden');
                noComments.classList.remove('hidden');
                noComments.innerHTML = '<p class="text-red-400/50">Kommentare konnten nicht geladen werden.</p>';
            }
        }

        function renderComments(comments) {
            const container = document.getElementById('comments-container');
            const loading = document.getElementById('comments-loading');
            const noComments = document.getElementById('no-comments');

            loading.classList.add('hidden');
            noComments.classList.add('hidden');

            // Remove existing comment bubbles
            container.querySelectorAll('.comment-bubble').forEach(el => el.remove());

            comments.forEach((c, i) => {
                const div = document.createElement('div');
                div.className = 'comment-bubble';
                div.style.animation = `fadeInUp 0.5s ease-out ${i * 0.1}s both`;

                const date = c.created_at
                    ? new Date(c.created_at).toLocaleDateString('de-DE', { day: '2-digit', month: '2-digit', year: 'numeric', hour: '2-digit', minute: '2-digit' })
                    : '';

                div.innerHTML = `
                    <div class="flex items-start justify-between mb-2">
                        <span class="font-semibold text-gold-300 text-sm">${escapeHtml(c.name)}</span>
                        <span class="text-white/20 text-xs">${date}</span>
                    </div>
                    <p class="text-white/60 text-sm leading-relaxed">${escapeHtml(c.message)}</p>
                `;
                container.appendChild(div);
            });
        }

        function escapeHtml(str) {
            const div = document.createElement('div');
            div.textContent = str;
            return div.innerHTML;
        }

        window.submitComment = async function() {
            const name = commentNameInput.value.trim();
            const message = commentMessageInput.value.trim();
            const submitBtn = document.getElementById('submit-comment');
            const successEl = document.getElementById('comment-success');

            if (!name || !message) {
                // Shake the empty fields
                if (!name) commentNameInput.classList.add('shake');
                if (!message) commentMessageInput.classList.add('shake');
                setTimeout(() => {
                    commentNameInput.classList.remove('shake');
                    commentMessageInput.classList.remove('shake');
                }, 600);
                return;
            }

            submitBtn.disabled = true;
            submitBtn.textContent = 'Wird gesendet...';

            const comment = { name, message, created_at: new Date().toISOString() };

            if (!CONFIG.SUPABASE_URL || !CONFIG.SUPABASE_ANON_KEY) {
                // Local storage fallback
                const localComments = JSON.parse(localStorage.getItem('babak-comments') || '[]');
                localComments.unshift(comment);
                localStorage.setItem('babak-comments', JSON.stringify(localComments));

                // Show success
                successEl.classList.remove('hidden');
                commentNameInput.value = '';
                commentMessageInput.value = '';
                charCount.textContent = '0 / 500';
                submitBtn.disabled = false;
                submitBtn.textContent = 'Absenden ‚ú®';
                loadComments();

                setTimeout(() => successEl.classList.add('hidden'), 3000);
                return;
            }

            try {
                await fetch(`${CONFIG.SUPABASE_URL}/rest/v1/comments`, {
                    method: 'POST',
                    headers: {
                        'apikey': CONFIG.SUPABASE_ANON_KEY,
                        'Content-Type': 'application/json',
                        'Prefer': 'return=minimal'
                    },
                    body: JSON.stringify({ name, message })
                });

                successEl.classList.remove('hidden');
                commentNameInput.value = '';
                commentMessageInput.value = '';
                charCount.textContent = '0 / 500';
                loadComments();

                setTimeout(() => successEl.classList.add('hidden'), 3000);
            } catch (err) {
                alert('Fehler beim Speichern. Bitte versuche es nochmal.');
            }

            submitBtn.disabled = false;
            submitBtn.textContent = 'Absenden ‚ú®';
        };

        // ---- Focus password input on load (dev mode only) ----
        if (passwordInput) setTimeout(() => passwordInput.focus(), 500);

    })();
    </script>

</body>
</html>